"use strict";(self.webpackChunkyandex_practicum_2_mega_game=self.webpackChunkyandex_practicum_2_mega_game||[]).push([[438],{7109:function(e,t,r){r.d(t,{Z:function(){return y}});var a=r(3366),n=r(7462),o=r(7294),i=r(6010),l=r(4780),c=r(948),s=r(1657),u=r(5949),d=r(5893),p=(0,u.Z)((0,d.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),m=r(5677);function f(e){return(0,m.Z)("MuiAvatar",e)}(0,r(1588).Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const v=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],g=(0,c.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})((({theme:e,ownerState:t})=>(0,n.Z)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===t.variant&&{borderRadius:e.shape.borderRadius},"square"===t.variant&&{borderRadius:0},t.colorDefault&&{color:e.palette.background.default,backgroundColor:"light"===e.palette.mode?e.palette.grey[400]:e.palette.grey[600]}))),h=(0,c.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),b=(0,c.ZP)(p,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});var y=o.forwardRef((function(e,t){const r=(0,s.Z)({props:e,name:"MuiAvatar"}),{alt:c,children:u,className:p,component:m="div",imgProps:y,sizes:Z,src:w,srcSet:S,variant:x="circular"}=r,O=(0,a.Z)(r,v);let R=null;const k=function({crossOrigin:e,referrerPolicy:t,src:r,srcSet:a}){const[n,i]=o.useState(!1);return o.useEffect((()=>{if(!r&&!a)return;i(!1);let n=!0;const o=new Image;return o.onload=()=>{n&&i("loaded")},o.onerror=()=>{n&&i("error")},o.crossOrigin=e,o.referrerPolicy=t,o.src=r,a&&(o.srcset=a),()=>{n=!1}}),[e,t,r,a]),n}((0,n.Z)({},y,{src:w,srcSet:S})),j=w||S,z=j&&"error"!==k,_=(0,n.Z)({},r,{colorDefault:!z,component:m,variant:x}),E=(e=>{const{classes:t,variant:r,colorDefault:a}=e,n={root:["root",r,a&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,l.Z)(n,f,t)})(_);return R=z?(0,d.jsx)(h,(0,n.Z)({alt:c,src:w,srcSet:S,sizes:Z,ownerState:_,className:E.img},y)):null!=u?u:j&&c?c[0]:(0,d.jsx)(b,{className:E.fallback}),(0,d.jsx)(g,(0,n.Z)({as:m,ownerState:_,className:(0,i.Z)(E.root,p),ref:t},O,{children:R}))}))},6867:function(e,t,r){r.d(t,{Z:function(){return y}});var a=r(3366),n=r(7462),o=r(7294),i=r(6010),l=r(4780),c=r(1796),s=r(948),u=r(1657),d=r(4417),p=r(8216),m=r(5677);function f(e){return(0,m.Z)("MuiIconButton",e)}var v=(0,r(1588).Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),g=r(5893);const h=["edge","children","className","color","disabled","disableFocusRipple","size"],b=(0,s.ZP)(d.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"default"!==r.color&&t[`color${(0,p.Z)(r.color)}`],r.edge&&t[`edge${(0,p.Z)(r.edge)}`],t[`size${(0,p.Z)(r.size)}`]]}})((({theme:e,ownerState:t})=>(0,n.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.active} / ${e.vars.palette.action.hoverOpacity})`:(0,c.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})),(({theme:e,ownerState:t})=>(0,n.Z)({},"inherit"===t.color&&{color:"inherit"},"inherit"!==t.color&&"default"!==t.color&&(0,n.Z)({color:(e.vars||e).palette[t.color].main},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,c.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===t.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===t.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${v.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})));var y=o.forwardRef((function(e,t){const r=(0,u.Z)({props:e,name:"MuiIconButton"}),{edge:o=!1,children:c,className:s,color:d="default",disabled:m=!1,disableFocusRipple:v=!1,size:y="medium"}=r,Z=(0,a.Z)(r,h),w=(0,n.Z)({},r,{edge:o,color:d,disabled:m,disableFocusRipple:v,size:y}),S=(e=>{const{classes:t,disabled:r,color:a,edge:n,size:o}=e,i={root:["root",r&&"disabled","default"!==a&&`color${(0,p.Z)(a)}`,n&&`edge${(0,p.Z)(n)}`,`size${(0,p.Z)(o)}`]};return(0,l.Z)(i,f,t)})(w);return(0,g.jsx)(b,(0,n.Z)({className:(0,i.Z)(S.root,s),centerRipple:!0,focusRipple:!v,disabled:m,ref:t,ownerState:w},Z,{children:c}))}))},6438:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var a=r(7294),n=r(6867),o=r(7109),i=r(1797),l=function(e){var t=e.type,r=void 0===t?"text":t,n=e.accept,o=e.className,i=void 0===o?"input__submit":o,l=e.placeHolder,c=e.name,s=e.inputValue,u=e.handleChange;return a.createElement("input",{className:i,accept:n,type:r,value:s,placeholder:l,name:c,onChange:u})},c=r(5998),s=r(3269);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(a=r.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var v=function(){var e=(0,c.v9)((function(e){return e.auth.user})),t=(0,c.I0)(),r=m((0,a.useState)(e),2),u=r[0],f=r[1],v=m((0,a.useState)({}),2),g=v[0],h=v[1],b=m((0,a.useState)(null!=e&&e.avatar?"https://ya-praktikum.tech/api/v2/resources/"+(null==e?void 0:e.avatar):void 0),2),y=b[0],Z=b[1];function w(e){var t=e.target.name,r=e.target.value;f((function(e){return d(d({},e),{},p({},t,r))}))}function S(e){var t=e.target.name,r=e.target.value;h((function(e){return d(d({},e),{},p({},t,r))}))}return a.createElement("div",{className:"user-settings__container"},a.createElement("div",{className:"user-settings__avatar"},a.createElement("input",{type:"file",onChange:function(e){e.preventDefault();var r=e.target.files;if(null!==r&&r.length>0){var a=new FormData;a.append("avatar",r[0]);var n=URL.createObjectURL(r[0]);t((0,s.Jh)(a)),Z(n)}},id:"upload",accept:"image/*",style:{display:"none"}}),a.createElement("label",{htmlFor:"upload"},a.createElement(n.Z,{color:"primary","aria-label":"upload picture",component:"span"},a.createElement(o.Z,{id:"avatar",src:y,style:{width:"90px",height:"90px"}}))),a.createElement("label",{htmlFor:"avatar"})),a.createElement("form",{id:"user-settings",className:"user-settings__settings",onSubmit:function(e){t((0,s.iT)(u)),e.preventDefault()}},["first_name","second_name","display_name","login","email","phone"].map((function(e,t){return a.createElement(i.Z,{style:{width:"200px",margin:"5px"},type:"text",label:e,name:e,variant:"outlined",value:u[e]||"",onChange:w,key:t})})),a.createElement(l,{type:"submit",inputValue:"Изменить данные"})),a.createElement("div",{className:"user-settings__avatar"}),a.createElement("form",{id:"password-form",className:"user-settings__passwords",onSubmit:function(e){t((0,s.Ks)(g)),e.preventDefault()}},["oldPassword","newPassword"].map((function(e,t){return a.createElement(i.Z,{style:{width:"200px",margin:"5px"},type:"text",label:e,name:e,variant:"outlined",onChange:S,key:t})})),a.createElement(l,{type:"submit",inputValue:"Изменить пароль"})))},g=function(){return a.createElement(v,null)}}}]);